import { buildUrl } from "cloudinary-build-url";
import type { ImageLoaderProps } from "next/image";

const CLOUDINARY_CLOUD_NAME = "ekafyi"; // TODO replace with WBW username

const DEFAULT_QUALITY = "auto:eco";

export const cloudinaryLoader = ({ src, width, quality }: ImageLoaderProps) => {
  const url = buildUrl(src, {
    cloud: { cloudName: CLOUDINARY_CLOUD_NAME },
    transformations: {
      colorSpace: "tinysrgb",
      quality: quality ?? DEFAULT_QUALITY,
      resize: {
        width,
        type: "scale",
      },
    },
  });
  return url;
};

/** Programmatically get blurred image URL. Use as value of blurDataURL in Image component. */
export const getBlurred = (src: string, width: number) => {
  const url = buildUrl(src, {
    cloud: { cloudName: CLOUDINARY_CLOUD_NAME },
    transformations: {
      colorSpace: "tinysrgb",
      resize: {
        width,
        type: "scale",
      },
      effect: "blur:1000",
      quality: 2,
    },
  });
  return url;
};

/** Blurred placeholder when using next/image component with external loader. */
export const bannerBlurData =
  "data:image/jpeg;base64,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";
